<!DOCTYPE html>  <html> <head>   <title>modernizr.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               modernizr.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-1">#</a>               </div>               <p>Modernizr v1.6
http://www.modernizr.com</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-2">#</a>               </div>               <ul>
<li>Faruk Ates  http://farukat.es/</li>
<li>Paul Irish  http://paulirish.com/</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-3">#</a>               </div>               <p>Copyright (c) 2009-2010
Dual-licensed under the BSD or MIT licenses.
http://www.modernizr.com/license/</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-4">#</a>               </div>               <p>Modernizr is a script that detects native CSS3 and HTML5 features
available in the current UA and provides an object containing all
features with a true/false value, depending on whether the UA has
native support for it or not.</p>

<p>Modernizr will also add classes to the <html> element of the page,
one for each feature it detects. If the UA supports it, a class
like "cssgradients" will be added. If not, the class name will be
"no-cssgradients". This allows for simple if-conditionals in your
CSS, giving you fine control over the look &amp; feel of your website.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nb">window</span><span class="p">.</span><span class="nx">Modernizr</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span><span class="nb">document</span><span class="p">,</span><span class="kc">undefined</span><span class="p">){</span>
    
    <span class="kd">var</span> <span class="nx">version</span> <span class="o">=</span> <span class="s1">&#39;1.6&#39;</span><span class="p">,</span>

    <span class="nx">ret</span> <span class="o">=</span> <span class="p">{},</span>

    
    
    <span class="nx">docElement</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">,</span>
    <span class="nx">docHead</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">head</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;head&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-5">#</a>               </div>               <p>Create our "modernizr" element that we do most feature tests on.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">mod</span> <span class="o">=</span> <span class="s1">&#39;modernizr&#39;</span><span class="p">,</span>
    <span class="nx">modElem</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="nx">mod</span> <span class="p">),</span>
    <span class="nx">m_style</span> <span class="o">=</span> <span class="nx">modElem</span><span class="p">.</span><span class="nx">style</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-6">#</a>               </div>               <p>Create the input element for various Web Forms feature tests.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">inputElem</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s1">&#39;input&#39;</span> <span class="p">),</span>
    
    <span class="nx">smile</span> <span class="o">=</span> <span class="s1">&#39;:)&#39;</span><span class="p">,</span>
    
    <span class="nx">tostring</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">,</span>
    </pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-7">#</a>               </div>               <p>List of property values to set for css tests. See ticket #21</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">prefixes</span> <span class="o">=</span> <span class="s1">&#39; -webkit- -moz- -o- -ms- -khtml- &#39;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">),</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-8">#</a>               </div>               <p>Following spec is to expose vendor-specific style properties as:
  elem.style.WebkitBorderRadius
and the following would be incorrect:
  elem.style.webkitBorderRadius</p>             </td>             <td class="code">               <div class="highlight"><pre>    </pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-9">#</a>               </div>               <p>Webkit ghosts their properties in lowercase but Opera &amp; Moz do not.
Microsoft foregoes prefixes entirely &lt;= IE8, but appears to 
  use a lowercase <code>ms</code> instead of the correct <code>Ms</code> in IE9</p>             </td>             <td class="code">               <div class="highlight"><pre>    </pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-10">#</a>               </div>               <p>More here: http://github.com/Modernizr/Modernizr/issues/issue/21</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">domPrefixes</span> <span class="o">=</span> <span class="s1">&#39;Webkit Moz O ms Khtml&#39;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">),</span>

    <span class="nx">ns</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;svg&#39;</span><span class="o">:</span> <span class="s1">&#39;http://www.w3.org/2000/svg&#39;</span><span class="p">},</span>

    <span class="nx">tests</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="nx">inputs</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="nx">attrs</span> <span class="o">=</span> <span class="p">{},</span>
    
    <span class="nx">classes</span> <span class="o">=</span> <span class="p">[],</span>
    
    <span class="nx">featurename</span><span class="p">,</span> <span class="c1">// used in testing loop</span>
    
    
    </pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-11">#</a>               </div>               <p>todo: consider using http://javascript.nwbox.com/CSSSupport/css-support.js instead</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">testMediaQuery</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">mq</span><span class="p">){</span>

      <span class="kd">var</span> <span class="nx">st</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">),</span>
          <span class="nx">div</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">),</span>
          <span class="nx">ret</span><span class="p">;</span>

      <span class="nx">st</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">mq</span> <span class="o">+</span> <span class="s1">&#39;{#modernizr{height:3px}}&#39;</span><span class="p">;</span>
      <span class="nx">docHead</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">st</span><span class="p">);</span>
      <span class="nx">div</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="s1">&#39;modernizr&#39;</span><span class="p">;</span>
      <span class="nx">docElement</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">div</span><span class="p">);</span>

      <span class="nx">ret</span> <span class="o">=</span> <span class="nx">div</span><span class="p">.</span><span class="nx">offsetHeight</span> <span class="o">===</span> <span class="mi">3</span><span class="p">;</span>

      <span class="nx">st</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">st</span><span class="p">);</span>
      <span class="nx">div</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">div</span><span class="p">);</span>

      <span class="k">return</span> <span class="o">!!</span><span class="nx">ret</span><span class="p">;</span>

    <span class="p">},</span>
    
    </pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-12">#</a>               </div>               <p>isEventSupported determines if a given element supports the given event
function from http://yura.thinkweb2.com/isEventSupported/</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">isEventSupported</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">(){</span>

      <span class="kd">var</span> <span class="nx">TAGNAMES</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;select&#39;</span><span class="o">:</span><span class="s1">&#39;input&#39;</span><span class="p">,</span><span class="s1">&#39;change&#39;</span><span class="o">:</span><span class="s1">&#39;input&#39;</span><span class="p">,</span>
        <span class="s1">&#39;submit&#39;</span><span class="o">:</span><span class="s1">&#39;form&#39;</span><span class="p">,</span><span class="s1">&#39;reset&#39;</span><span class="o">:</span><span class="s1">&#39;form&#39;</span><span class="p">,</span>
        <span class="s1">&#39;error&#39;</span><span class="o">:</span><span class="s1">&#39;img&#39;</span><span class="p">,</span><span class="s1">&#39;load&#39;</span><span class="o">:</span><span class="s1">&#39;img&#39;</span><span class="p">,</span><span class="s1">&#39;abort&#39;</span><span class="o">:</span><span class="s1">&#39;img&#39;</span>
      <span class="p">};</span>

      <span class="kd">function</span> <span class="nx">isEventSupported</span><span class="p">(</span><span class="nx">eventName</span><span class="p">,</span> <span class="nx">element</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">element</span> <span class="o">=</span> <span class="nx">element</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">TAGNAMES</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]</span> <span class="o">||</span> <span class="s1">&#39;div&#39;</span><span class="p">);</span>
        <span class="nx">eventName</span> <span class="o">=</span> <span class="s1">&#39;on&#39;</span> <span class="o">+</span> <span class="nx">eventName</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-13">#</a>               </div>               <p>When using <code>setAttribute</code>, IE skips "unload", WebKit skips "unload" and "resize", whereas <code>in</code> "catches" those</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">isSupported</span> <span class="o">=</span> <span class="p">(</span><span class="nx">eventName</span> <span class="k">in</span> <span class="nx">element</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isSupported</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-14">#</a>               </div>               <p>If it has no <code>setAttribute</code> (i.e. doesn't implement Node interface), try generic element</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">element</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">element</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">setAttribute</span> <span class="o">&amp;&amp;</span> <span class="nx">element</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">element</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="nx">eventName</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
            <span class="nx">isSupported</span> <span class="o">=</span> <span class="nx">is</span><span class="p">(</span><span class="nx">element</span><span class="p">[</span><span class="nx">eventName</span><span class="p">],</span> <span class="s1">&#39;function&#39;</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-15">#</a>               </div>               <p>If property was created, "remove it" (by setting value to <code>undefined</code>)</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">is</span><span class="p">(</span><span class="nx">element</span><span class="p">[</span><span class="nx">eventName</span><span class="p">],</span> <span class="kc">undefined</span><span class="p">))</span> <span class="p">{</span>
              <span class="nx">element</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">element</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span><span class="nx">eventName</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="nx">element</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">isSupported</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">isEventSupported</span><span class="p">;</span>
    <span class="p">})();</span>
    
    </pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-16">#</a>               </div>               <p>hasOwnProperty shim by kangax needed for Safari 2.0 support</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">_hasOwnProperty</span> <span class="o">=</span> <span class="p">({}).</span><span class="nx">hasOwnProperty</span><span class="p">,</span> <span class="nx">hasOwnProperty</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">is</span><span class="p">(</span><span class="nx">_hasOwnProperty</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">is</span><span class="p">(</span><span class="nx">_hasOwnProperty</span><span class="p">.</span><span class="nx">call</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">hasOwnProperty</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">property</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">_hasOwnProperty</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">property</span><span class="p">);</span>
      <span class="p">};</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
      <span class="nx">hasOwnProperty</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">property</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// yes, this can give false positives/negatives, but most of the time we don&#39;t care about those //</span>
        <span class="k">return</span> <span class="p">((</span><span class="nx">property</span> <span class="k">in</span> <span class="nx">object</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">is</span><span class="p">(</span><span class="nx">object</span><span class="p">.</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">prototype</span><span class="p">[</span><span class="nx">property</span><span class="p">],</span> <span class="kc">undefined</span><span class="p">));</span>
      <span class="p">};</span>
    <span class="p">}</span>
    </pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-17">#</a>               </div>               <p>set_css applies given styles to the Modernizr DOM node.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">function</span> <span class="nx">set_css</span><span class="p">(</span> <span class="nx">str</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">m_style</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">=</span> <span class="nx">str</span><span class="p">;</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-18">#</a>               </div>               <p>set<em>css</em>all extrapolates all vendor-specific css strings.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">function</span> <span class="nx">set_css_all</span><span class="p">(</span> <span class="nx">str1</span><span class="p">,</span> <span class="nx">str2</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">set_css</span><span class="p">(</span><span class="nx">prefixes</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">str1</span> <span class="o">+</span> <span class="s1">&#39;;&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">str2</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span> <span class="p">));</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-19">#</a>               </div>               <p>is returns a boolean for if typeof obj is exactly type.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">function</span> <span class="nx">is</span><span class="p">(</span> <span class="nx">obj</span><span class="p">,</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">typeof</span> <span class="nx">obj</span> <span class="o">===</span> <span class="nx">type</span><span class="p">;</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-20">#</a>               </div>               <p>contains returns a boolean for if substr is found within str.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">function</span> <span class="nx">contains</span><span class="p">(</span> <span class="nx">str</span><span class="p">,</span> <span class="nx">substr</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">+</span><span class="nx">str</span><span class="p">).</span><span class="nx">indexOf</span><span class="p">(</span> <span class="nx">substr</span> <span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-21">#</a>               </div>               <p>test_props is a generic CSS / DOM property test; if a browser supports
  a certain property, it won't return undefined for it.
  A supported CSS property returns empty string when its not yet set.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">function</span> <span class="nx">test_props</span><span class="p">(</span> <span class="nx">props</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">props</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">m_style</span><span class="p">[</span> <span class="nx">props</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="o">!</span><span class="nx">callback</span> <span class="o">||</span> <span class="nx">callback</span><span class="p">(</span> <span class="nx">props</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">modElem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-22">#</a>               </div>               <p>test<em>props</em>all tests a list of DOM properties we want to check against.
  We specify literally ALL possible (known and/or likely) properties on 
  the element including the non-vendor prefixed one, for forward-
  compatibility.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">function</span> <span class="nx">test_props_all</span><span class="p">(</span> <span class="nx">prop</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
      
        <span class="kd">var</span> <span class="nx">uc_prop</span> <span class="o">=</span> <span class="nx">prop</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">prop</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
            <span class="nx">props</span>   <span class="o">=</span> <span class="p">(</span><span class="nx">prop</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">domPrefixes</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">uc_prop</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span><span class="p">)</span> <span class="o">+</span> <span class="nx">uc_prop</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">);</span>

        <span class="k">return</span> <span class="o">!!</span><span class="nx">test_props</span><span class="p">(</span> <span class="nx">props</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">);</span>
    <span class="p">}</span>
    </pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-23">#</a>               </div>               <h2>Tests</h2>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;flexbox&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-24">#</a>               </div>               <p>set<em>prefixed</em>value_css sets the property of a specified element
adding vendor prefixes to the VALUE of the property.
@param {Element} element
@param {string} property The property name. This will not be prefixed.
@param {string} value The value of the property. This WILL be prefixed.
@param {string=} extra Additional CSS to append unmodified to the end of
the CSS string.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">function</span> <span class="nx">set_prefixed_value_css</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">property</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">extra</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">property</span> <span class="o">+=</span> <span class="s1">&#39;:&#39;</span><span class="p">;</span>
            <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">=</span> <span class="p">(</span><span class="nx">property</span> <span class="o">+</span> <span class="nx">prefixes</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">value</span> <span class="o">+</span> <span class="s1">&#39;;&#39;</span> <span class="o">+</span> <span class="nx">property</span><span class="p">)).</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="nx">property</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="nx">extra</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
        <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-25">#</a>               </div>               <p>set<em>prefixed</em>property_css sets the property of a specified element
adding vendor prefixes to the NAME of the property.
@param {Element} element
@param {string} property The property name. This WILL be prefixed.
@param {string} value The value of the property. This will not be prefixed.
@param {string=} extra Additional CSS to append unmodified to the end of
the CSS string.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">function</span> <span class="nx">set_prefixed_property_css</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">property</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">extra</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">=</span> <span class="nx">prefixes</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">property</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span> <span class="o">+</span> <span class="nx">value</span> <span class="o">+</span> <span class="s1">&#39;;&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="nx">extra</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">),</span>
            <span class="nx">elem</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>

        <span class="nx">set_prefixed_value_css</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span> <span class="s1">&#39;display&#39;</span><span class="p">,</span> <span class="s1">&#39;box&#39;</span><span class="p">,</span> <span class="s1">&#39;width:42px;padding:0;&#39;</span><span class="p">);</span>
        <span class="nx">set_prefixed_property_css</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="s1">&#39;box-flex&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;width:10px;&#39;</span><span class="p">);</span>

        <span class="nx">c</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">elem</span><span class="p">);</span>
        <span class="nx">docElement</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span>

        <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">offsetWidth</span> <span class="o">===</span> <span class="mi">42</span><span class="p">;</span>

        <span class="nx">c</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">elem</span><span class="p">);</span>
        <span class="nx">docElement</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span>

        <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
    <span class="p">};</span>
    </pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-26">#</a>               </div>               <p>On the S60 and BB Storm, getContext exists, but always returns undefined
http://github.com/Modernizr/Modernizr/issues/issue/97/ </p>             </td>             <td class="code">               <div class="highlight"><pre>    
    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;canvas&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s1">&#39;canvas&#39;</span> <span class="p">);</span>
        <span class="k">return</span> <span class="o">!!</span><span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">getContext</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">));</span>
    <span class="p">};</span>
    
    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;canvastext&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">!!</span><span class="p">(</span><span class="nx">ret</span><span class="p">[</span><span class="s1">&#39;canvas&#39;</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">is</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s1">&#39;canvas&#39;</span> <span class="p">).</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">).</span><span class="nx">fillText</span><span class="p">,</span> <span class="s1">&#39;function&#39;</span><span class="p">));</span>
    <span class="p">};</span>
    
    
    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;webgl&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>

        <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s1">&#39;canvas&#39;</span> <span class="p">);</span> 
        
        <span class="k">try</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;webgl&#39;</span><span class="p">)){</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span> <span class="p">}</span>
        <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>	<span class="p">}</span>
        
        <span class="k">try</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;experimental-webgl&#39;</span><span class="p">)){</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span> <span class="p">}</span>
        <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>	<span class="p">}</span>

        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">};</span>
    </pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-27">#</a>               </div>               <p>The Modernizr.touch test only indicates if the browser supports
   touch events, which does not necessarily reflect a touchscreen
   device, as evidenced by tablets running Windows 7 or, alas,
   the Palm Pre / WebOS (touch) phones.</p>

<p>Additionally, Chrome (desktop) used to lie about its support on this,
   but that has since been rectified: http://crbug.com/36415</p>

<p>We also test for Firefox 4 Multitouch Support.</p>             </td>             <td class="code">               <div class="highlight"><pre>     <span class="o">*</span></pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-28">#</a>               </div>               <p>For more info, see: http://modernizr.github.com/Modernizr/touch.html</p>             </td>             <td class="code">               <div class="highlight"><pre>     
    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;touch&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

        <span class="k">return</span> <span class="p">(</span><span class="s1">&#39;ontouchstart&#39;</span> <span class="k">in</span> <span class="nb">window</span><span class="p">)</span> <span class="o">||</span> <span class="nx">testMediaQuery</span><span class="p">(</span><span class="s1">&#39;@media (&#39;</span><span class="o">+</span><span class="nx">prefixes</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;touch-enabled),(&#39;</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;modernizr)&#39;</span><span class="p">);</span>

    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-29">#</a>               </div>               <p>geolocation tests for the new Geolocation API specification.
  This test is a standards compliant-only test; for more complete
  testing, including a Google Gears fallback, please see:
  http://code.google.com/p/geo-location-javascript/
or view a fallback solution using google's geo API:
  http://gist.github.com/366184</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;geolocation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">!!</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">;</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-30">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-30">#</a>               </div>               <p>Per 1.6: 
This used to be Modernizr.crosswindowmessaging but the longer
name has been deprecated in favor of a shorter and property-matching one.
The old API is still available in 1.6, but as of 2.0 will throw a warning,
and in the first release thereafter disappear entirely.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;postmessage&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="o">!!</span><span class="nb">window</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">;</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-31">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-31">#</a>               </div>               <p>Web SQL database detection is tricky:</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-32">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-32">#</a>               </div>               <p>In chrome incognito mode, openDatabase is truthy, but using it will 
  throw an exception: http://crbug.com/42380
We can create a dummy database, but there is no way to delete it afterwards. </p>             </td>             <td class="code">               <div class="highlight"><pre>    </pre></div>             </td>           </tr>                               <tr id="section-33">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-33">#</a>               </div>               <p>Meanwhile, Safari users can get prompted on any database creation.
  If they do, any page with Modernizr will give them a prompt:
  http://github.com/Modernizr/Modernizr/issues/closed#issue/113</p>             </td>             <td class="code">               <div class="highlight"><pre>    </pre></div>             </td>           </tr>                               <tr id="section-34">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-34">#</a>               </div>               <p>We have chosen to allow the Chrome incognito false positive, so that Modernizr
  doesn't litter the web with these test databases. As a developer, you'll have
  to account for this gotcha yourself.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;websqldatabase&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="o">!!</span><span class="nb">window</span><span class="p">.</span><span class="nx">openDatabase</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-35">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-35">#</a>               </div>               <p>if (result){</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">try</span> <span class="p">{</span>
              <span class="nx">result</span> <span class="o">=</span> <span class="o">!!</span><span class="nx">openDatabase</span><span class="p">(</span> <span class="nx">mod</span> <span class="o">+</span> <span class="s2">&quot;testdb&quot;</span><span class="p">,</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span> <span class="nx">mod</span> <span class="o">+</span> <span class="s2">&quot;testdb&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="nx">e4</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="p">}</span>
          <span class="p">}</span>  <span class="c1">//</span>
      <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
    <span class="p">};</span>
    </pre></div>             </td>           </tr>                               <tr id="section-36">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-36">#</a>               </div>               <p>Vendors have inconsistent prefixing with the experimental Indexed DB:
- Firefox is shipping indexedDB in FF4 as moz_indexedDB
- Webkit's implementation is accessible through webkitIndexedDB
We test both styles.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;indexedDB&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">len</span> <span class="o">=</span> <span class="nx">domPrefixes</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="p">){</span> 
        <span class="kd">var</span> <span class="nx">prefix</span> <span class="o">=</span> <span class="nx">domPrefixes</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">();</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">[</span><span class="nx">prefix</span> <span class="o">+</span> <span class="s1">&#39;_indexedDB&#39;</span><span class="p">]</span> <span class="o">||</span> <span class="nb">window</span><span class="p">[</span><span class="nx">prefix</span> <span class="o">+</span> <span class="s1">&#39;IndexedDB&#39;</span><span class="p">]){</span>
          <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span> 
      <span class="p">}</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-37">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-37">#</a>               </div>               <p>documentMode logic from YUI to filter out IE8 Compat Mode
  which false positives.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;hashchange&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">isEventSupported</span><span class="p">(</span><span class="s1">&#39;hashchange&#39;</span><span class="p">,</span> <span class="nb">window</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentMode</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentMode</span> <span class="o">&gt;</span> <span class="mi">7</span> <span class="p">);</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-38">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-38">#</a>               </div>               <p>Per 1.6: 
This used to be Modernizr.historymanagement but the longer
name has been deprecated in favor of a shorter and property-matching one.
The old API is still available in 1.6, but as of 2.0 will throw a warning,
and in the first release thereafter disappear entirely.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;history&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="o">!!</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">history</span> <span class="o">&amp;&amp;</span> <span class="nx">history</span><span class="p">.</span><span class="nx">pushState</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;draganddrop&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">isEventSupported</span><span class="p">(</span><span class="s1">&#39;dragstart&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">isEventSupported</span><span class="p">(</span><span class="s1">&#39;drop&#39;</span><span class="p">);</span>
    <span class="p">};</span>
    
    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;websockets&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="k">return</span> <span class="p">(</span><span class="s1">&#39;WebSocket&#39;</span> <span class="k">in</span> <span class="nb">window</span><span class="p">);</span>
    <span class="p">};</span>
    
    </pre></div>             </td>           </tr>                               <tr id="section-39">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-39">#</a>               </div>               <p>http://css-tricks.com/rgba-browser-support/</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;rgba&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-40">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-40">#</a>               </div>               <p>Set an rgba() color and check the returned value</p>             </td>             <td class="code">               <div class="highlight"><pre>        
        <span class="nx">set_css</span><span class="p">(</span>  <span class="s1">&#39;background-color:rgba(150,255,150,.5)&#39;</span> <span class="p">);</span>
        
        <span class="k">return</span> <span class="nx">contains</span><span class="p">(</span> <span class="nx">m_style</span><span class="p">.</span><span class="nx">backgroundColor</span><span class="p">,</span> <span class="s1">&#39;rgba&#39;</span> <span class="p">);</span>
    <span class="p">};</span>
    
    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;hsla&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-41">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-41">#</a>               </div>               <p>Same as rgba(), in fact, browsers re-map hsla() to rgba() internally,
  except IE9 who retains it as hsla</p>             </td>             <td class="code">               <div class="highlight"><pre>        
        <span class="nx">set_css</span><span class="p">(</span><span class="s1">&#39;background-color:hsla(120,40%,100%,.5)&#39;</span> <span class="p">);</span>
        
        <span class="k">return</span> <span class="nx">contains</span><span class="p">(</span> <span class="nx">m_style</span><span class="p">.</span><span class="nx">backgroundColor</span><span class="p">,</span> <span class="s1">&#39;rgba&#39;</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">contains</span><span class="p">(</span> <span class="nx">m_style</span><span class="p">.</span><span class="nx">backgroundColor</span><span class="p">,</span> <span class="s1">&#39;hsla&#39;</span> <span class="p">);</span>
    <span class="p">};</span>
    
    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;multiplebgs&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-42">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-42">#</a>               </div>               <p>Setting multiple images AND a color on the background shorthand property
 and then querying the style.background property value for the number of
 occurrences of "url(" is a reliable method for detecting ACTUAL support for this!</p>             </td>             <td class="code">               <div class="highlight"><pre>        
        <span class="nx">set_css</span><span class="p">(</span> <span class="s1">&#39;background:url(//:),url(//:),red url(//:)&#39;</span> <span class="p">);</span>
        </pre></div>             </td>           </tr>                               <tr id="section-43">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-43">#</a>               </div>               <p>If the UA supports multiple backgrounds, there should be three occurrences
  of the string "url(" in the return value for elem_style.background</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">return</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;(url\\s*\\(.*?){3}&quot;</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="nx">m_style</span><span class="p">.</span><span class="nx">background</span><span class="p">);</span>
    <span class="p">};</span>
    
    </pre></div>             </td>           </tr>                               <tr id="section-44">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-44">#</a>               </div>               <p>In testing support for a given CSS property, it's legit to test:
   <code>elem.style[styleName] !== undefined</code>
If the property is supported it will return an empty string,
if unsupported it will return undefined.</p>             </td>             <td class="code">               <div class="highlight"><pre>    </pre></div>             </td>           </tr>                               <tr id="section-45">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-45">#</a>               </div>               <p>We'll take advantage of this quick test and skip setting a style 
on our modernizr element, but instead just testing undefined vs
empty string.</p>             </td>             <td class="code">               <div class="highlight"><pre>    

    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;backgroundsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">test_props_all</span><span class="p">(</span> <span class="s1">&#39;backgroundSize&#39;</span> <span class="p">);</span>
    <span class="p">};</span>
    
    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;borderimage&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">test_props_all</span><span class="p">(</span> <span class="s1">&#39;borderImage&#39;</span> <span class="p">);</span>
    <span class="p">};</span>
    
    </pre></div>             </td>           </tr>                               <tr id="section-46">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-46">#</a>               </div>               <p>Super comprehensive table about all the unique implementations of 
border-radius: http://muddledramblings.com/table-of-css3-border-radius-compliance</p>             </td>             <td class="code">               <div class="highlight"><pre>    
    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;borderradius&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">test_props_all</span><span class="p">(</span> <span class="s1">&#39;borderRadius&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">prop</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">contains</span><span class="p">(</span> <span class="nx">prop</span><span class="p">,</span> <span class="s1">&#39;orderRadius&#39;</span> <span class="p">);</span>
        <span class="p">});</span>
    <span class="p">};</span>
    </pre></div>             </td>           </tr>                               <tr id="section-47">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-47">#</a>               </div>               <p>WebOS unfortunately false positives on this test.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;boxshadow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">test_props_all</span><span class="p">(</span> <span class="s1">&#39;boxShadow&#39;</span> <span class="p">);</span>
    <span class="p">};</span>
    </pre></div>             </td>           </tr>                               <tr id="section-48">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-48">#</a>               </div>               <p>FF3.0 will false positive on this test </p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;textshadow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="k">return</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">textShadow</span> <span class="o">===</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="p">};</span>
    
    
    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;opacity&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-49">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-49">#</a>               </div>               <p>Browsers that actually have CSS Opacity implemented have done so
 according to spec, which means their return values are within the
 range of [0.0,1.0] - including the leading zero.</p>             </td>             <td class="code">               <div class="highlight"><pre>        
        <span class="nx">set_css_all</span><span class="p">(</span> <span class="s1">&#39;opacity:.55&#39;</span> <span class="p">);</span>
        </pre></div>             </td>           </tr>                               <tr id="section-50">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-50">#</a>               </div>               <p>The non-literal . in this regex is intentional:
  German Chrome returns this value as 0,55
https://github.com/Modernizr/Modernizr/issues/#issue/59/comment/516632</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">return</span> <span class="sr">/^0.55$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">m_style</span><span class="p">.</span><span class="nx">opacity</span><span class="p">);</span>
    <span class="p">};</span>
    
    
    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;cssanimations&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">test_props_all</span><span class="p">(</span> <span class="s1">&#39;animationName&#39;</span> <span class="p">);</span>
    <span class="p">};</span>
    
    
    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;csscolumns&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">test_props_all</span><span class="p">(</span> <span class="s1">&#39;columnCount&#39;</span> <span class="p">);</span>
    <span class="p">};</span>
    
    
    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;cssgradients&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-51">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-51">#</a>               </div>               <p>For CSS Gradients syntax, please see:
http://webkit.org/blog/175/introducing-css-gradients/
https://developer.mozilla.org/en/CSS/-moz-linear-gradient
https://developer.mozilla.org/en/CSS/-moz-radial-gradient
http://dev.w3.org/csswg/css3-images/#gradients-</p>             </td>             <td class="code">               <div class="highlight"><pre>        
        <span class="kd">var</span> <span class="nx">str1</span> <span class="o">=</span> <span class="s1">&#39;background-image:&#39;</span><span class="p">,</span>
            <span class="nx">str2</span> <span class="o">=</span> <span class="s1">&#39;gradient(linear,left top,right bottom,from(#9f9),to(white));&#39;</span><span class="p">,</span>
            <span class="nx">str3</span> <span class="o">=</span> <span class="s1">&#39;linear-gradient(left top,#9f9, white);&#39;</span><span class="p">;</span>
        
        <span class="nx">set_css</span><span class="p">(</span>
            <span class="p">(</span><span class="nx">str1</span> <span class="o">+</span> <span class="nx">prefixes</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">str2</span> <span class="o">+</span> <span class="nx">str1</span><span class="p">)</span> <span class="o">+</span> <span class="nx">prefixes</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">str3</span> <span class="o">+</span> <span class="nx">str1</span><span class="p">)).</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="nx">str1</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span>
        <span class="p">);</span>
        
        <span class="k">return</span> <span class="nx">contains</span><span class="p">(</span> <span class="nx">m_style</span><span class="p">.</span><span class="nx">backgroundImage</span><span class="p">,</span> <span class="s1">&#39;gradient&#39;</span> <span class="p">);</span>
    <span class="p">};</span>
    
    
    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;cssreflections&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">test_props_all</span><span class="p">(</span> <span class="s1">&#39;boxReflect&#39;</span> <span class="p">);</span>
    <span class="p">};</span>
    
    
    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;csstransforms&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">!!</span><span class="nx">test_props</span><span class="p">([</span> <span class="s1">&#39;transformProperty&#39;</span><span class="p">,</span> <span class="s1">&#39;WebkitTransform&#39;</span><span class="p">,</span> <span class="s1">&#39;MozTransform&#39;</span><span class="p">,</span> <span class="s1">&#39;OTransform&#39;</span><span class="p">,</span> <span class="s1">&#39;msTransform&#39;</span> <span class="p">]);</span>
    <span class="p">};</span>
    
    
    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;csstransforms3d&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        
        <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="o">!!</span><span class="nx">test_props</span><span class="p">([</span> <span class="s1">&#39;perspectiveProperty&#39;</span><span class="p">,</span> <span class="s1">&#39;WebkitPerspective&#39;</span><span class="p">,</span> <span class="s1">&#39;MozPerspective&#39;</span><span class="p">,</span> <span class="s1">&#39;OPerspective&#39;</span><span class="p">,</span> <span class="s1">&#39;msPerspective&#39;</span> <span class="p">]);</span>
        </pre></div>             </td>           </tr>                               <tr id="section-52">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-52">#</a>               </div>               <p>Webkits 3D transforms are passed off to the browser's own graphics renderer.
  It works fine in Safari on Leopard and Snow Leopard, but not in Chrome in
  some conditions. As a result, Webkit typically recognizes the syntax but 
  will sometimes throw a false positive, thus we must do a more thorough check:</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">ret</span> <span class="o">&amp;&amp;</span> <span class="s1">&#39;webkitPerspective&#39;</span> <span class="k">in</span> <span class="nx">docElement</span><span class="p">.</span><span class="nx">style</span><span class="p">){</span>
          </pre></div>             </td>           </tr>                               <tr id="section-53">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-53">#</a>               </div>               <p>Webkit allows this media query to succeed only if the feature is enabled. <br />
<code>@media (transform-3d),(-o-transform-3d),(-moz-transform-3d),(-ms-transform-3d),(-webkit-transform-3d),(modernizr){ ... }</code>      </p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="nx">ret</span> <span class="o">=</span> <span class="nx">testMediaQuery</span><span class="p">(</span><span class="s1">&#39;@media (&#39;</span><span class="o">+</span><span class="nx">prefixes</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;transform-3d),(&#39;</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;modernizr)&#39;</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
    <span class="p">};</span>
    
    
    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;csstransitions&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">test_props_all</span><span class="p">(</span> <span class="s1">&#39;transitionProperty&#39;</span> <span class="p">);</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-54">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-54">#</a>               </div>               <p>@font-face detection routine by Diego Perini
http://javascript.nwbox.com/CSSSupport/</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;fontface&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>

        <span class="kd">var</span> 
        <span class="nx">sheet</span><span class="p">,</span> <span class="nx">bool</span><span class="p">,</span>
        <span class="nx">head</span> <span class="o">=</span> <span class="nx">docHead</span> <span class="o">||</span> <span class="nx">docElement</span><span class="p">,</span>
        <span class="nx">style</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;style&quot;</span><span class="p">),</span>
        <span class="nx">impl</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">implementation</span> <span class="o">||</span> <span class="p">{</span> <span class="nx">hasFeature</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span> <span class="p">}</span> <span class="p">};</span>
        
        <span class="nx">style</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s1">&#39;text/css&#39;</span><span class="p">;</span>
        <span class="nx">head</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">style</span><span class="p">,</span> <span class="nx">head</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">);</span>
        <span class="nx">sheet</span> <span class="o">=</span> <span class="nx">style</span><span class="p">.</span><span class="nx">sheet</span> <span class="o">||</span> <span class="nx">style</span><span class="p">.</span><span class="nx">styleSheet</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">supportAtRule</span> <span class="o">=</span> <span class="nx">impl</span><span class="p">.</span><span class="nx">hasFeature</span><span class="p">(</span><span class="s1">&#39;CSS2&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">?</span>
                <span class="kd">function</span><span class="p">(</span><span class="nx">rule</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">sheet</span> <span class="o">&amp;&amp;</span> <span class="nx">rule</span><span class="p">))</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
                    <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                    <span class="k">try</span> <span class="p">{</span>
                        <span class="nx">sheet</span><span class="p">.</span><span class="nx">insertRule</span><span class="p">(</span><span class="nx">rule</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
                        <span class="nx">result</span> <span class="o">=</span> <span class="o">!</span><span class="p">(</span><span class="sr">/unknown/i</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="nx">sheet</span><span class="p">.</span><span class="nx">cssRules</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">cssText</span><span class="p">);</span>
                        <span class="nx">sheet</span><span class="p">.</span><span class="nx">deleteRule</span><span class="p">(</span><span class="nx">sheet</span><span class="p">.</span><span class="nx">cssRules</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
                    <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
                    <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
                <span class="p">}</span> <span class="o">:</span>
                <span class="kd">function</span><span class="p">(</span><span class="nx">rule</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">sheet</span> <span class="o">&amp;&amp;</span> <span class="nx">rule</span><span class="p">))</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
                    <span class="nx">sheet</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">=</span> <span class="nx">rule</span><span class="p">;</span>
                    
                    <span class="k">return</span> <span class="nx">sheet</span><span class="p">.</span><span class="nx">cssText</span><span class="p">.</span><span class="nx">length</span> <span class="o">!==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span><span class="sr">/unknown/i</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="nx">sheet</span><span class="p">.</span><span class="nx">cssText</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
                      <span class="nx">sheet</span><span class="p">.</span><span class="nx">cssText</span>
                            <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\r+|\n+/g</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                            <span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">rule</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span> <span class="o">===</span> <span class="mi">0</span><span class="p">;</span>
                <span class="p">};</span>
        
        <span class="nx">bool</span> <span class="o">=</span> <span class="nx">supportAtRule</span><span class="p">(</span><span class="s1">&#39;@font-face { font-family: &quot;font&quot;; src: &quot;font.ttf&quot;; }&#39;</span><span class="p">);</span>
        <span class="nx">head</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">style</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">bool</span><span class="p">;</span>
    <span class="p">};</span>
    </pre></div>             </td>           </tr>                               <tr id="section-55">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-55">#</a>               </div>               <p>These tests evaluate support of the video/audio elements, as well as
testing what types of content they support.</p>

<p>We're using the Boolean constructor here, so that we can extend the value
e.g.  Modernizr.video     // true
      Modernizr.video.ogg // 'probably'</p>

<p>Codec values from : http://github.com/NielsLeenheer/html5test/blob/9106a8/index.html#L845
                    thx to NielsLeenheer and zcorpan</p>             </td>             <td class="code">               <div class="highlight"><pre>    </pre></div>             </td>           </tr>                               <tr id="section-56">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-56">#</a>               </div>               <p>Note: in FF 3.5.1 and 3.5.0, "no" was a return value instead of empty string.
  Modernizr does not normalize for that.</p>             </td>             <td class="code">               <div class="highlight"><pre>    
    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;video&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;video&#39;</span><span class="p">),</span>
            <span class="nx">bool</span> <span class="o">=</span> <span class="o">!!</span><span class="nx">elem</span><span class="p">.</span><span class="nx">canPlayType</span><span class="p">;</span>
        
        <span class="k">if</span> <span class="p">(</span><span class="nx">bool</span><span class="p">){</span>  
            <span class="nx">bool</span>      <span class="o">=</span> <span class="k">new</span> <span class="nb">Boolean</span><span class="p">(</span><span class="nx">bool</span><span class="p">);</span>  
            <span class="nx">bool</span><span class="p">.</span><span class="nx">ogg</span>  <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">canPlayType</span><span class="p">(</span><span class="s1">&#39;video/ogg; codecs=&quot;theora&quot;&#39;</span><span class="p">);</span>
            </pre></div>             </td>           </tr>                               <tr id="section-57">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-57">#</a>               </div>               <p>Workaround required for IE9, which doesn't report video support without audio codec specified.
  bug 599718 @ msft connect</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="kd">var</span> <span class="nx">h264</span> <span class="o">=</span> <span class="s1">&#39;video/mp4; codecs=&quot;avc1.42E01E&#39;</span><span class="p">;</span>
            <span class="nx">bool</span><span class="p">.</span><span class="nx">h264</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">canPlayType</span><span class="p">(</span><span class="nx">h264</span> <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">canPlayType</span><span class="p">(</span><span class="nx">h264</span> <span class="o">+</span> <span class="s1">&#39;, mp4a.40.2&quot;&#39;</span><span class="p">);</span>
            
            <span class="nx">bool</span><span class="p">.</span><span class="nx">webm</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">canPlayType</span><span class="p">(</span><span class="s1">&#39;video/webm; codecs=&quot;vp8, vorbis&quot;&#39;</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">bool</span><span class="p">;</span>
    <span class="p">};</span>
    
    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;audio&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;audio&#39;</span><span class="p">),</span>
            <span class="nx">bool</span> <span class="o">=</span> <span class="o">!!</span><span class="nx">elem</span><span class="p">.</span><span class="nx">canPlayType</span><span class="p">;</span>
        
        <span class="k">if</span> <span class="p">(</span><span class="nx">bool</span><span class="p">){</span>  
            <span class="nx">bool</span>      <span class="o">=</span> <span class="k">new</span> <span class="nb">Boolean</span><span class="p">(</span><span class="nx">bool</span><span class="p">);</span>  
            <span class="nx">bool</span><span class="p">.</span><span class="nx">ogg</span>  <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">canPlayType</span><span class="p">(</span><span class="s1">&#39;audio/ogg; codecs=&quot;vorbis&quot;&#39;</span><span class="p">);</span>
            <span class="nx">bool</span><span class="p">.</span><span class="nx">mp3</span>  <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">canPlayType</span><span class="p">(</span><span class="s1">&#39;audio/mpeg;&#39;</span><span class="p">);</span>
            </pre></div>             </td>           </tr>                               <tr id="section-58">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-58">#</a>               </div>               <p>Mimetypes accepted: 
  https://developer.mozilla.org/En/Media<em>formats</em>supported<em>by</em>the<em>audio</em>and<em>video</em>elements
  http://bit.ly/iphoneoscodecs</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="nx">bool</span><span class="p">.</span><span class="nx">wav</span>  <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">canPlayType</span><span class="p">(</span><span class="s1">&#39;audio/wav; codecs=&quot;1&quot;&#39;</span><span class="p">);</span>
            <span class="nx">bool</span><span class="p">.</span><span class="nx">m4a</span>  <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">canPlayType</span><span class="p">(</span><span class="s1">&#39;audio/x-m4a;&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">canPlayType</span><span class="p">(</span><span class="s1">&#39;audio/aac;&#39;</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">bool</span><span class="p">;</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-59">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-59">#</a>               </div>               <p>Firefox has made these tests rather unfun.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-60">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-60">#</a>               </div>               <p>In FF4, if disabled, window.localStorage should === null.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-61">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-61">#</a>               </div>               <p>Normally, we could not test that directly and need to do a 
  <code>('localStorage' in window) &amp;&amp;</code> test first because otherwise Firefox will
  throw http://bugzil.la/365772 if cookies are disabled</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-62">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-62">#</a>               </div>               <p>However, in Firefox 4 betas, if dom.storage.enabled == false, just mentioning
  the property will throw an exception. http://bugzil.la/599479
This looks to be fixed for FF4 Final.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-63">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-63">#</a>               </div>               <p>Because we are forced to try/catch this, we'll go aggressive.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-64">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-64">#</a>               </div>               <p>FWIW: IE8 Compat mode supports these features completely:
  http://www.quirksmode.org/dom/html5.html
But IE8 doesn't support either with local files</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;localstorage&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="k">return</span> <span class="o">!!</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">};</span>

    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;sessionstorage&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="k">return</span> <span class="o">!!</span><span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">};</span>


    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;webWorkers&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">!!</span><span class="nb">window</span><span class="p">.</span><span class="nx">Worker</span><span class="p">;</span>
    <span class="p">};</span>


    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;applicationcache&#39;</span><span class="p">]</span> <span class="o">=</span>  <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">!!</span><span class="nb">window</span><span class="p">.</span><span class="nx">applicationCache</span><span class="p">;</span>
    <span class="p">};</span>

 </pre></div>             </td>           </tr>                               <tr id="section-65">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-65">#</a>               </div>               <p>Thanks to Erik Dahlstrom</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;svg&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="k">return</span> <span class="o">!!</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElementNS</span> <span class="o">&amp;&amp;</span> <span class="o">!!</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElementNS</span><span class="p">(</span><span class="nx">ns</span><span class="p">.</span><span class="nx">svg</span><span class="p">,</span> <span class="s2">&quot;svg&quot;</span><span class="p">).</span><span class="nx">createSVGRect</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;inlinesvg&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">div</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>
      <span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s1">&#39;&lt;svg/&gt;&#39;</span><span class="p">;</span>
      <span class="k">return</span> <span class="p">(</span><span class="nx">div</span><span class="p">.</span><span class="nx">firstChild</span> <span class="o">&amp;&amp;</span> <span class="nx">div</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">namespaceURI</span><span class="p">)</span> <span class="o">==</span> <span class="nx">ns</span><span class="p">.</span><span class="nx">svg</span><span class="p">;</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-66">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-66">#</a>               </div>               <p>Thanks to F1lt3r and lucideer
http://github.com/Modernizr/Modernizr/issues#issue/35</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;smil&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="k">return</span> <span class="o">!!</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElementNS</span> <span class="o">&amp;&amp;</span> <span class="sr">/SVG/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">tostring</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElementNS</span><span class="p">(</span><span class="nx">ns</span><span class="p">.</span><span class="nx">svg</span><span class="p">,</span><span class="s1">&#39;animate&#39;</span><span class="p">)));</span>
    <span class="p">};</span>

    <span class="nx">tests</span><span class="p">[</span><span class="s1">&#39;svgclippaths&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span></pre></div>             </td>           </tr>                               <tr id="section-67">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-67">#</a>               </div>               <p>Possibly returns a false positive in Safari 3.2?</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">return</span> <span class="o">!!</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElementNS</span> <span class="o">&amp;&amp;</span> <span class="sr">/SVG/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">tostring</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElementNS</span><span class="p">(</span><span class="nx">ns</span><span class="p">.</span><span class="nx">svg</span><span class="p">,</span><span class="s1">&#39;clipPath&#39;</span><span class="p">)));</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-68">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-68">#</a>               </div>               <p>input features and input types go directly onto the ret object, bypassing the tests loop.
Hold this guy to execute in a moment.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">function</span> <span class="nx">webforms</span><span class="p">(){</span>
    </pre></div>             </td>           </tr>                               <tr id="section-69">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-69">#</a>               </div>               <p>Run through HTML5's new input attributes to see if the UA understands any.
We're using f which is the <input> element created early on
Mike Taylr has created a comprehensive resource for testing these attributes
  when applied to all input types: 
  http://miketaylr.com/code/input-type-attr.html
spec: http://www.whatwg.org/specs/web-apps/current-work/multipage/the-input-element.html#input-type-attr-summary</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">ret</span><span class="p">[</span><span class="s1">&#39;input&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">len</span> <span class="o">=</span> <span class="nx">props</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">attrs</span><span class="p">[</span> <span class="nx">props</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">]</span> <span class="o">=</span> <span class="o">!!</span><span class="p">(</span><span class="nx">props</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="k">in</span> <span class="nx">inputElem</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">attrs</span><span class="p">;</span>
        <span class="p">})(</span><span class="s1">&#39;autocomplete autofocus list placeholder max min multiple pattern required step&#39;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">));</span></pre></div>             </td>           </tr>                               <tr id="section-70">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-70">#</a>               </div>               <p>Run through HTML5's new input types to see if the UA understands any.
  This is put behind the tests runloop because it doesn't return a
  true/false like all the other tests; instead, it returns an object
  containing each input type with its corresponding true/false value </p>             </td>             <td class="code">               <div class="highlight"><pre>        </pre></div>             </td>           </tr>                               <tr id="section-71">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-71">#</a>               </div>               <p>Big thanks to @miketaylr for the html5 forms expertise. http://miketaylr.com/</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">ret</span><span class="p">[</span><span class="s1">&#39;inputtypes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">bool</span><span class="p">,</span> <span class="nx">len</span><span class="o">=</span><span class="nx">props</span><span class="p">.</span><span class="nx">length</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span> <span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
              
                <span class="nx">inputElem</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="nx">props</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
                <span class="nx">bool</span> <span class="o">=</span> <span class="nx">inputElem</span><span class="p">.</span><span class="nx">type</span> <span class="o">!==</span> <span class="s1">&#39;text&#39;</span><span class="p">;</span>
                </pre></div>             </td>           </tr>                               <tr id="section-72">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-72">#</a>               </div>               <p>Chrome likes to falsely purport support, so we feed it a textual value;
if that doesnt succeed then we know there's a custom UI</p>             </td>             <td class="code">               <div class="highlight"><pre>                <span class="k">if</span> <span class="p">(</span><span class="nx">bool</span><span class="p">){</span>  

                    <span class="nx">inputElem</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">smile</span><span class="p">;</span>
     
                    <span class="k">if</span> <span class="p">(</span><span class="sr">/^range$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">inputElem</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">inputElem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">WebkitAppearance</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">){</span>
                      
                      <span class="nx">docElement</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">inputElem</span><span class="p">);</span>
                      <span class="kd">var</span> <span class="nx">defaultView</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">defaultView</span><span class="p">;</span>
                      </pre></div>             </td>           </tr>                               <tr id="section-73">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-73">#</a>               </div>               <p>Safari 2-4 allows the smiley as a value, despite making a slider</p>             </td>             <td class="code">               <div class="highlight"><pre>                      <span class="nx">bool</span> <span class="o">=</span>  <span class="nx">defaultView</span><span class="p">.</span><span class="nx">getComputedStyle</span> <span class="o">&amp;&amp;</span> 
                              <span class="nx">defaultView</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">(</span><span class="nx">inputElem</span><span class="p">,</span> <span class="kc">null</span><span class="p">).</span><span class="nx">WebkitAppearance</span> <span class="o">!==</span> <span class="s1">&#39;textfield&#39;</span> <span class="o">&amp;&amp;</span> 
                      </pre></div>             </td>           </tr>                               <tr id="section-74">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-74">#</a>               </div>               <p>Mobile android web browser has false positive, so must
check the height to see if the widget is actually there.</p>             </td>             <td class="code">               <div class="highlight"><pre>                              <span class="p">(</span><span class="nx">inputElem</span><span class="p">.</span><span class="nx">offsetHeight</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">);</span>
                              
                      <span class="nx">docElement</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">inputElem</span><span class="p">);</span>
                              
                    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="sr">/^(search|tel)$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">inputElem</span><span class="p">.</span><span class="nx">type</span><span class="p">)){</span></pre></div>             </td>           </tr>                               <tr id="section-75">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-75">#</a>               </div>               <p>Spec doesnt define any special parsing or detectable UI 
  behaviors so we pass these through as true</p>             </td>             <td class="code">               <div class="highlight"><pre>                      </pre></div>             </td>           </tr>                               <tr id="section-76">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-76">#</a>               </div>               <p>Interestingly, opera fails the earlier test, so it doesn't
 even make it here.</p>             </td>             <td class="code">               <div class="highlight"><pre>                      
                    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="sr">/^(url|email)$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">inputElem</span><span class="p">.</span><span class="nx">type</span><span class="p">))</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-77">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-77">#</a>               </div>               <p>Real url and email support comes with prebaked validation.</p>             </td>             <td class="code">               <div class="highlight"><pre>                      <span class="nx">bool</span> <span class="o">=</span> <span class="nx">inputElem</span><span class="p">.</span><span class="nx">checkValidity</span> <span class="o">&amp;&amp;</span> <span class="nx">inputElem</span><span class="p">.</span><span class="nx">checkValidity</span><span class="p">()</span> <span class="o">===</span> <span class="kc">false</span><span class="p">;</span>
                      
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-78">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-78">#</a>               </div>               <p>If the upgraded input compontent rejects the :) text, we got a winner</p>             </td>             <td class="code">               <div class="highlight"><pre>                      <span class="nx">bool</span> <span class="o">=</span> <span class="nx">inputElem</span><span class="p">.</span><span class="nx">value</span> <span class="o">!=</span> <span class="nx">smile</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                
                <span class="nx">inputs</span><span class="p">[</span> <span class="nx">props</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">]</span> <span class="o">=</span> <span class="o">!!</span><span class="nx">bool</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">inputs</span><span class="p">;</span>
        <span class="p">})(</span><span class="s1">&#39;search tel url email datetime date month week time datetime-local number range color&#39;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">));</span>

    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-79">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-79">#</a>               </div>               <h2>End of test definitions</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-80">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-80">#</a>               </div>               <p>Run through all tests and detect their support in the current UA.
todo: hypothetically we could be doing an array of tests and use a basic loop here.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">feature</span> <span class="k">in</span> <span class="nx">tests</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">hasOwnProperty</span><span class="p">(</span> <span class="nx">tests</span><span class="p">,</span> <span class="nx">feature</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-81">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-81">#</a>               </div>               <p>run the test, throw the return value into the Modernizr,
  then based on that boolean, define an appropriate className
  and push it into an array of classes we'll join later.</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="nx">featurename</span>  <span class="o">=</span> <span class="nx">feature</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
            <span class="nx">ret</span><span class="p">[</span> <span class="nx">featurename</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">tests</span><span class="p">[</span> <span class="nx">feature</span> <span class="p">]();</span>

            <span class="nx">classes</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="p">(</span> <span class="nx">ret</span><span class="p">[</span> <span class="nx">featurename</span> <span class="p">]</span> <span class="o">?</span> <span class="s1">&#39;&#39;</span> <span class="o">:</span> <span class="s1">&#39;no-&#39;</span> <span class="p">)</span> <span class="o">+</span> <span class="nx">featurename</span> <span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    </pre></div>             </td>           </tr>                               <tr id="section-82">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-82">#</a>               </div>               <p>input tests need to run.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">ret</span><span class="p">.</span><span class="nx">input</span><span class="p">)</span> <span class="nx">webforms</span><span class="p">();</span>
    

   </pre></div>             </td>           </tr>                               <tr id="section-83">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-83">#</a>               </div>               <p>Per 1.6: deprecated API is still accesible for now:</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">ret</span><span class="p">.</span><span class="nx">crosswindowmessaging</span> <span class="o">=</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">postmessage</span><span class="p">;</span>
    <span class="nx">ret</span><span class="p">.</span><span class="nx">historymanagement</span> <span class="o">=</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">history</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-84">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-84">#</a>               </div>               <p>Addtest allows the user to define their own feature tests
the result will be added onto the Modernizr object,
as well as an appropriate className set on the html element</p>

<p>@param feature - String naming the feature
@param test - Function returning true if feature is supported, false if not</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">ret</span><span class="p">.</span><span class="nx">addTest</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">feature</span><span class="p">,</span> <span class="nx">test</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">feature</span> <span class="o">=</span> <span class="nx">feature</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
      
      <span class="k">if</span> <span class="p">(</span><span class="nx">ret</span><span class="p">[</span> <span class="nx">feature</span> <span class="p">])</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span> <span class="c1">// quit if you&#39;re trying to overwrite an existing test</span>
      <span class="p">}</span> 
      <span class="nx">test</span> <span class="o">=</span> <span class="o">!!</span><span class="p">(</span><span class="nx">test</span><span class="p">());</span>
      <span class="nx">docElement</span><span class="p">.</span><span class="nx">className</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">test</span> <span class="o">?</span> <span class="s1">&#39;&#39;</span> <span class="o">:</span> <span class="s1">&#39;no-&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="nx">feature</span><span class="p">;</span> 
      <span class="nx">ret</span><span class="p">[</span> <span class="nx">feature</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">test</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span> <span class="c1">// allow chaining.</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-85">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-85">#</a>               </div>               <p>Reset m.style.cssText to nothing to reduce memory footprint.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">set_css</span><span class="p">(</span> <span class="s1">&#39;&#39;</span> <span class="p">);</span>
    <span class="nx">modElem</span> <span class="o">=</span> <span class="nx">f</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-86">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-86">#</a>               </div>               <p>Enable HTML 5 elements for styling in IE. 
fyi: jscript version does not reflect trident version
     therefore ie9 in ie7 mode will still have a jScript v.9</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="nx">enableHTML5</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">.</span><span class="nx">attachEvent</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="kd">function</span><span class="p">(){</span> <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">);</span>
                                      <span class="nx">elem</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;&lt;elem&gt;&lt;/elem&gt;&quot;</span><span class="p">;</span>
                                      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">.</span><span class="nx">length</span> <span class="o">!==</span> <span class="mi">1</span><span class="p">;</span> <span class="p">})())</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-87">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-87">#</a>               </div>               <p>iepp v1.6.2 by @jon_neal : code.google.com/p/ie-print-protector</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">win</span><span class="p">,</span> <span class="nx">doc</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">elems</span> <span class="o">=</span> <span class="s1">&#39;abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video&#39;</span><span class="p">,</span>
            <span class="nx">elemsArr</span> <span class="o">=</span> <span class="nx">elems</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;|&#39;</span><span class="p">),</span>
            <span class="nx">elemsArrLen</span> <span class="o">=</span> <span class="nx">elemsArr</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
            <span class="nx">elemRegExp</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s1">&#39;(^|\\s)(&#39;</span><span class="o">+</span><span class="nx">elems</span><span class="o">+</span><span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="s1">&#39;gi&#39;</span><span class="p">),</span> 
            <span class="nx">tagRegExp</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s1">&#39;&lt;(\//)(&#39;</span><span class="o">+</span><span class="nx">elems</span><span class="o">+</span><span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="s1">&#39;gi&#39;</span><span class="p">),</span>
            <span class="nx">ruleRegExp</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s1">&#39;(^|[^\\n]*?\\s)(&#39;</span><span class="o">+</span><span class="nx">elems</span><span class="o">+</span><span class="s1">&#39;)([^\\n]*)({[\\n\\w\\W]*?})&#39;</span><span class="p">,</span> <span class="s1">&#39;gi&#39;</span><span class="p">),</span>
            <span class="nx">docFrag</span> <span class="o">=</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">createDocumentFragment</span><span class="p">(),</span>
            <span class="nx">html</span> <span class="o">=</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">,</span>
            <span class="nx">head</span> <span class="o">=</span> <span class="nx">html</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">,</span>
            <span class="nx">bodyElem</span> <span class="o">=</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">),</span>
            <span class="nx">styleElem</span> <span class="o">=</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">),</span>
            <span class="nx">body</span><span class="p">;</span>
          <span class="kd">function</span> <span class="nx">shim</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
            <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">a</span> <span class="o">&lt;</span> <span class="nx">elemsArrLen</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-88">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-88">#</a>               </div>               <p>Use createElement so IE allows HTML5-named elements in a document</p>             </td>             <td class="code">               <div class="highlight"><pre>              <span class="nx">doc</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">elemsArr</span><span class="p">[</span><span class="nx">a</span><span class="p">]);</span>
          <span class="p">}</span>
          <span class="kd">function</span> <span class="nx">getCSS</span><span class="p">(</span><span class="nx">styleSheetList</span><span class="p">,</span> <span class="nx">mediaType</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
              <span class="nx">len</span> <span class="o">=</span> <span class="nx">styleSheetList</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
              <span class="nx">styleSheet</span><span class="p">,</span>
              <span class="nx">cssTextArr</span> <span class="o">=</span> <span class="p">[];</span>
            <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">a</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">styleSheet</span> <span class="o">=</span> <span class="nx">styleSheetList</span><span class="p">[</span><span class="nx">a</span><span class="p">];</span></pre></div>             </td>           </tr>                               <tr id="section-89">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-89">#</a>               </div>               <p>Get css from all non-screen stylesheets and their imports</p>             </td>             <td class="code">               <div class="highlight"><pre>              <span class="k">if</span> <span class="p">((</span><span class="nx">mediaType</span> <span class="o">=</span> <span class="nx">styleSheet</span><span class="p">.</span><span class="nx">media</span> <span class="o">||</span> <span class="nx">mediaType</span><span class="p">)</span> <span class="o">!=</span> <span class="s1">&#39;screen&#39;</span><span class="p">)</span> <span class="nx">cssTextArr</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">getCSS</span><span class="p">(</span><span class="nx">styleSheet</span><span class="p">.</span><span class="nx">imports</span><span class="p">,</span> <span class="nx">mediaType</span><span class="p">),</span> <span class="nx">styleSheet</span><span class="p">.</span><span class="nx">cssText</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">cssTextArr</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
          <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-90">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-90">#</a>               </div>               <p>Shim the document and iepp fragment</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="nx">shim</span><span class="p">(</span><span class="nx">doc</span><span class="p">);</span>
          <span class="nx">shim</span><span class="p">(</span><span class="nx">docFrag</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-91">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-91">#</a>               </div>               <p>Add iepp custom print style element</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="nx">head</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">styleElem</span><span class="p">,</span> <span class="nx">head</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">);</span>
          <span class="nx">styleElem</span><span class="p">.</span><span class="nx">media</span> <span class="o">=</span> <span class="s1">&#39;print&#39;</span><span class="p">;</span>
          <span class="nx">win</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">(</span>
            <span class="s1">&#39;onbeforeprint&#39;</span><span class="p">,</span>
            <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                <span class="nx">cssText</span> <span class="o">=</span> <span class="nx">getCSS</span><span class="p">(</span><span class="nx">doc</span><span class="p">.</span><span class="nx">styleSheets</span><span class="p">,</span> <span class="s1">&#39;all&#39;</span><span class="p">),</span>
                <span class="nx">cssTextArr</span> <span class="o">=</span> <span class="p">[],</span>
                <span class="nx">rule</span><span class="p">;</span>
              <span class="nx">body</span> <span class="o">=</span> <span class="nx">body</span> <span class="o">||</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-92">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-92">#</a>               </div>               <p>Get only rules which reference HTML5 elements by name</p>             </td>             <td class="code">               <div class="highlight"><pre>              <span class="k">while</span> <span class="p">((</span><span class="nx">rule</span> <span class="o">=</span> <span class="nx">ruleRegExp</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">cssText</span><span class="p">))</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-93">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-93">#</a>               </div>               <p>Replace all html5 element references with iepp substitute classnames</p>             </td>             <td class="code">               <div class="highlight"><pre>                <span class="nx">cssTextArr</span><span class="p">.</span><span class="nx">push</span><span class="p">((</span><span class="nx">rule</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="nx">rule</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">+</span><span class="nx">rule</span><span class="p">[</span><span class="mi">3</span><span class="p">]).</span><span class="nx">replace</span><span class="p">(</span><span class="nx">elemRegExp</span><span class="p">,</span> <span class="s1">&#39;$1.iepp_$2&#39;</span><span class="p">)</span><span class="o">+</span><span class="nx">rule</span><span class="p">[</span><span class="mi">4</span><span class="p">]);</span></pre></div>             </td>           </tr>                               <tr id="section-94">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-94">#</a>               </div>               <p>Write iepp custom print CSS</p>             </td>             <td class="code">               <div class="highlight"><pre>              <span class="nx">styleElem</span><span class="p">.</span><span class="nx">styleSheet</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">=</span> <span class="nx">cssTextArr</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;\n&#39;</span><span class="p">);</span>
              <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">a</span> <span class="o">&lt;</span> <span class="nx">elemsArrLen</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">nodeList</span> <span class="o">=</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="nx">elemsArr</span><span class="p">[</span><span class="nx">a</span><span class="p">]),</span>
                  <span class="nx">nodeListLen</span> <span class="o">=</span> <span class="nx">nodeList</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
                  <span class="nx">b</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">b</span> <span class="o">&lt;</span> <span class="nx">nodeListLen</span><span class="p">)</span>
                  <span class="k">if</span> <span class="p">(</span><span class="nx">nodeList</span><span class="p">[</span><span class="nx">b</span><span class="p">].</span><span class="nx">className</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;iepp_&#39;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-95">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-95">#</a>               </div>               <p>Append iepp substitute classnames to all html5 elements</p>             </td>             <td class="code">               <div class="highlight"><pre>                    <span class="nx">nodeList</span><span class="p">[</span><span class="nx">b</span><span class="p">].</span><span class="nx">className</span> <span class="o">+=</span> <span class="s1">&#39; iepp_&#39;</span><span class="o">+</span><span class="nx">elemsArr</span><span class="p">[</span><span class="nx">a</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="nx">docFrag</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
              <span class="nx">html</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">bodyElem</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-96">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-96">#</a>               </div>               <p>Write iepp substitute print-safe document</p>             </td>             <td class="code">               <div class="highlight"><pre>              <span class="nx">bodyElem</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="nx">body</span><span class="p">.</span><span class="nx">className</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-97">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-97">#</a>               </div>               <p>Replace HTML5 elements with <font> which is print-safe and shouldn't conflict since it isn't part of html5</p>             </td>             <td class="code">               <div class="highlight"><pre>              <span class="nx">bodyElem</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">body</span><span class="p">.</span><span class="nx">innerHTML</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">tagRegExp</span><span class="p">,</span> <span class="s1">&#39;&lt;$1font&#39;</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">);</span>
          <span class="nx">win</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">(</span>
            <span class="s1">&#39;onafterprint&#39;</span><span class="p">,</span>
            <span class="kd">function</span><span class="p">()</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-98">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-98">#</a>               </div>               <p>Undo everything done in onbeforeprint</p>             </td>             <td class="code">               <div class="highlight"><pre>              <span class="nx">bodyElem</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
              <span class="nx">html</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">bodyElem</span><span class="p">);</span>
              <span class="nx">html</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
              <span class="nx">styleElem</span><span class="p">.</span><span class="nx">styleSheet</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">);</span>
        <span class="p">})(</span><span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">);</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-99">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-99">#</a>               </div>               <p>Assign private properties to the return object with prefix</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">ret</span><span class="p">.</span><span class="nx">_enableHTML5</span>     <span class="o">=</span> <span class="nx">enableHTML5</span><span class="p">;</span>
    <span class="nx">ret</span><span class="p">.</span><span class="nx">_version</span>         <span class="o">=</span> <span class="nx">version</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-100">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-100">#</a>               </div>               <p>Remove "no-js" class from <html> element, if it exists:</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">docElement</span><span class="p">.</span><span class="nx">className</span><span class="o">=</span><span class="nx">docElement</span><span class="p">.</span><span class="nx">className</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\bno-js\b/</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; js&#39;</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-101">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-101">#</a>               </div>               <p>Add the new classes to the <html> element.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">docElement</span><span class="p">.</span><span class="nx">className</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">classes</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span> <span class="s1">&#39; &#39;</span> <span class="p">);</span>
    
    <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>

<span class="p">})(</span><span class="k">this</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nb">document</span><span class="p">);</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 



<!-- .. and I HALPED -->
<script src="https://github.com/cowboy/javascript-linkify/raw/master/ba-linkify.min.js"></script>
<script>
[].forEach.call( document.querySelectorAll('.docs'), function(elem){  elem.innerHTML = linkify(elem.innerHTML); })
</script>
<style>
.docs a { color : DarkSlateBlue; font-size: 85%; -webkit-transition: 0.3s all; border-radius: 3px; padding: 0 2px;}
.docs a:hover { background : DarkSlateBlue; color: white; }

</style>


